<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explora Salta - Mapa Interactivo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Tenor+Sans&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color: #0f172a;
        background: #f8fafc;
        font-family: "Tenor Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2.5rem 1.25rem 3rem;
        gap: 1.5rem;
      }

      header {
        max-width: 1100px;
        width: 100%;
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        align-items: center;
      }

      @media (min-width: 900px) {
        header {
          grid-template-columns: 1.1fr 1fr;
          gap: 2rem;
        }
      }

      h1 {
        font-family: "Cinzel Decorative", "Times New Roman", serif;
        font-weight: 700;
        letter-spacing: -0.02em;
        margin: 0 0 0.6rem;
        font-size: clamp(1.9rem, 2.6vw + 1.2rem, 2.8rem);
      }

      p.lead {
        margin: 0 0 1rem;
        color: #334155;
        font-size: 1.05rem;
        line-height: 1.7;
      }

      .cta-row {
        display: flex;
        flex-wrap: wrap;
        gap: 0.8rem;
      }

      .btn {
        border: none;
        border-radius: 999px;
        padding: 0.85rem 1.4rem;
        font-weight: 700;
        cursor: pointer;
        transition: transform 150ms ease, box-shadow 150ms ease;
        display: inline-flex;
        align-items: center;
        gap: 0.45rem;
      }

      .btn-primary {
        background: linear-gradient(135deg, #0f62fe, #2563eb);
        color: #fff;
        box-shadow: 0 15px 40px -18px #1d4ed8;
      }

      .btn-secondary {
        background: #e2e8f0;
        color: #0f172a;
      }

      .btn:hover {
        transform: translateY(-1px);
      }

      .btn:focus-visible {
        outline: 3px solid #2563eb;
        outline-offset: 2px;
      }

      #map {
        width: min(1100px, 100%);
        height: 600px;
        border-radius: 1.5rem;
        overflow: hidden;
        box-shadow: 0 25px 60px -22px rgba(15, 23, 42, 0.35);
        border: 1px solid #e2e8f0;
      }

      .info-window {
        max-width: 260px;
        font-size: 0.95rem;
      }

      .info-window h2 {
        margin: 0 0 0.3rem;
        font-size: 1.05rem;
        font-family: "Cinzel Decorative", "Times New Roman", serif;
      }

      .rating-row {
        display: flex;
        align-items: center;
        gap: 0.35rem;
        font-weight: 700;
      }

      .stars {
        display: inline-flex;
        gap: 0.1rem;
        color: #fbbf24;
        font-size: 1rem;
      }

      .reviews-count {
        color: #475569;
        font-size: 0.86rem;
        margin: 0.2rem 0 0.8rem;
      }

      .reviews-link {
        color: #2563eb;
        font-weight: 700;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        margin-top: 0.35rem;
      }

      .reviews-link:hover {
        text-decoration: underline;
      }

      footer {
        width: 100%;
        max-width: 1100px;
        display: flex;
        justify-content: space-between;
        gap: 0.5rem;
        color: #475569;
        font-size: 0.95rem;
      }

      footer a {
        color: #2563eb;
        font-weight: 600;
        text-decoration: none;
      }

      footer a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <header>
      <div>
        <h1>Explora Salta con Google Maps</h1>
        <p class="lead">
          Activa tu clave de Google Maps Platform, copia este archivo en tu hosting (o GitHub Pages) y
          visualiza los puntos imperdibles de Salta con calificaciones reales, reseñas y rutas directas.
        </p>
        <div class="cta-row">
          <a class="btn btn-primary" href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank" rel="noreferrer">
            Obtener API Key
          </a>
          <a class="btn btn-secondary" href="#map">Ver mapa</a>
        </div>
      </div>
      <div>
        <p class="lead" style="margin-top:0;">
          <strong>¿Cómo funciona?</strong> Cada marcador consulta la API de Places para mostrar nombre, estrellas,
          número de reseñas y enlaces a Google Maps. Incluye un botón "Cómo llegar" para iniciar la navegación.
        </p>
        <ul style="margin:0; padding-left:1.1rem; color:#334155; line-height:1.7;">
          <li>HTML + CSS + JavaScript puro.</li>
          <li>Compatible con GitHub Pages u otros hostings estáticos.</li>
          <li>Personaliza los lugares editando el array <code>lugaresSalta</code>.</li>
        </ul>
      </div>
    </header>

    <div id="map" role="region" aria-label="Mapa interactivo de Salta"></div>

    <footer>
      <span>Reemplaza <code>YOUR_API_KEY</code> antes de publicar.</span>
      <a href="https://www.google.com/maps" target="_blank" rel="noreferrer">Abrir Google Maps</a>
    </footer>

    <script>
      const lugaresSalta = [
        {
          nombre: "Catedral Basílica de Salta",
          lat: -24.788407,
          lng: -65.410858,
          placeId: "ChIJR9g2rt5SK5QRZfNcaUVbnVQ",
        },
        {
          nombre: "Cerro San Bernardo",
          lat: -24.782619,
          lng: -65.402752,
          placeId: "ChIJZ1koXLTGK5QRM9RnBbTK1Zs",
        },
        {
          nombre: "Cabildo Histórico de Salta",
          lat: -24.789169,
          lng: -65.410118,
          placeId: "ChIJ3fjSnN5SK5QRyNyEJD7BqXg",
        },
      ];

      let map;
      let infoWindow;
      let placesService;

      function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: -24.788, lng: -65.4105 },
          zoom: 14,
          mapId: "explora-salta-map",
        });

        infoWindow = new google.maps.InfoWindow();
        placesService = new google.maps.places.PlacesService(map);

        lugaresSalta.forEach((lugar) => {
          const marker = new google.maps.Marker({
            position: { lat: lugar.lat, lng: lugar.lng },
            map,
            title: lugar.nombre,
          });

          marker.addListener("click", () => {
            obtenerDetallesLugar(lugar, marker);
          });
        });
      }

      function obtenerDetallesLugar(lugar, marker) {
        const request = {
          placeId: lugar.placeId,
          fields: ["name", "rating", "user_ratings_total", "url", "place_id", "geometry"],
        };

        placesService.getDetails(request, (place, status) => {
          if (status !== google.maps.places.PlacesServiceStatus.OK || !place) {
            mostrarInfoWindow(
              marker,
              `<div class="info-window"><h2>${lugar.nombre}</h2><p>No pudimos cargar los datos de Google Maps.</p></div>`
            );
            return;
          }

          const rating = place.rating ? place.rating.toFixed(1) : "–";
          const reviews = place.user_ratings_total ?? 0;
          const stars = place.rating ? generarEstrellas(place.rating) : "Sin datos";

          const reviewsUrl = place.url ||
            `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(place.name)}&query_place_id=${place.place_id || lugar.placeId}`;

          const coords = place.geometry?.location || marker.getPosition();
          const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${coords.lat()},${coords.lng()}&destination_place_id=${place.place_id || lugar.placeId}`;

          const content = `
            <div class="info-window">
              <h2>${place.name}</h2>
              <div class="rating-row">
                <span class="stars" aria-label="${rating} de 5">${stars}</span>
                <span>${rating}</span>
              </div>
              <p class="reviews-count">${reviews} reseñas</p>
              <a class="reviews-link" href="${reviewsUrl}" target="_blank" rel="noopener noreferrer">Ver reseñas en Google Maps →</a><br />
              <a class="reviews-link" href="${directionsUrl}" target="_blank" rel="noopener noreferrer">Cómo llegar →</a>
            </div>
          `;

          mostrarInfoWindow(marker, content);
        });
      }

      function generarEstrellas(valor) {
        const rounded = Math.round(valor);
        return `${"★".repeat(rounded)}${"☆".repeat(5 - rounded)}`;
      }

      function mostrarInfoWindow(marker, content) {
        infoWindow.setContent(content);
        infoWindow.open({ anchor: marker, map, shouldFocus: false });
      }

      window.initMap = initMap;
    </script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initMap"
      async
      defer
    ></script>
  </body>
</html>
